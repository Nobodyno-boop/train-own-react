const m=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(t){if(t.ep)return;t.ep=!0;const n=s(t);fetch(t.href,n)}};m();class p{constructor(e=!0){this.elements=[],this.tree=[],this.states=[],this.currentId="",this.count=0,this.base="",this.baseJsx=null,this.container=null,this.refreshMode=!1,this.frags={},this._frag="",this.debug=e}id(){return Math.random().toString(36).slice(2,7)}el(e,s,...r){var l;let t="-42";this.currentId!==""?t=this.currentId:(this.currentId=this.id(),t=this.currentId);let n=this._frag,o={node:e,props:{...s,__id:t,__frag:n},childs:r!=null?r:[],_t:e,id:t,parent:"",frag:n};if(typeof e=="function"){console.group(e.name);let a="";this.refreshMode?s!=null&&s.__frag&&(a=s.__frag.split("#")[1],this._frag=s.__frag):(this.currentId=this.id(),a=this.id(),this._frag=e.name+"#"+a);let c=e(s,r);return this._frag="",(l=this.frags[e.name])!=null||(this.frags[e.name]=[]),this.frags[e.name].push({id:a,tree:c,_t:e}),console.groupEnd(),c}return this.currentId="",o}render(e,s){this.container=s,this.baseJsx=e,console.group("start"),this.currentId=this.id();let r=e({});r.childs.length===0&&(r._t=jsx),console.log(r),r.childs.flat().map(n=>this.patchParent(n,r.id)),this.tree=r;let t=this.toElement(r);console.groupEnd(),s.replaceChildren(t)}patchParent(e,s){if(typeof e=="object")return e.parent=s,e!=null&&e.childs?e.childs.flat().map(r=>this.patchParent(r,e.id)):e}toElement(e,s){if(typeof e=="object"&&e._n){let o=e.data();return e.fn(o).map(c=>this.toElement(c))}else if(typeof e.node>"u")return document.createTextNode(e);let r=document.createElement(e.node),t=e.props;for(let o in t)if(o&&t.hasOwnProperty(o)){let l=t[o];if(l===!0)r.setAttribute(o,o);else if(l!==!1&&l!=null)if(o.startsWith("on")&&o.toLowerCase()in window)r.addEventListener(o.toLowerCase().substr(2),a=>l(a));else if(o.startsWith("__")){if(!this.debug)continue;typeof l=="function"?r.setAttribute(o,l(e.id)):r.setAttribute(o,l.toString())}else typeof l=="function"?r.setAttribute(o,l(e.id)):r.setAttribute(o,l.toString())}let n=e.childs.map(o=>this.mergeChilds(o,{...e,el:r})).flat();return r.append(...n),this.refreshMode||this.elements.push({...e,el:r}),r}mergeChilds(e,s){return Array.isArray(e)?e.map(r=>this.mergeChilds(r)):typeof e=="function"?document.createTextNode(e(s.id)):typeof e=="string"?document.createTextNode(e):this.toElement(e,s)}registerState(e){if(this.currentId!==""){let s={id:this.id(),el:this.currentId,value:e};return this.states.push(s),s}}getState(e,s){let r=this.states.find(t=>t.id===e);return s!==""&&(r.el=s),r?r.value:""}getParent(e){return this.tree.childs.find(s=>this._getParent(s,e,this.tree))}setState(e,s){this.refreshMode=!0;let r=this.states.find(t=>t.id===e);if(r){r.value=s;let t=this.elements.find(n=>n.id===r.el);if(t.frag!==""){let n=t.frag.split("#"),o=this.frags[n[0]];if(o){let l=o.find(c=>c.id=n[1]),a=this.elements.find(c=>c.id===l.tree.id);if(a){console.log(a);let c=this.toElement(l.tree);console.log(c),a.el.replaceChildren(c)}}}else{let n=this.toElement(t);t.el.replaceChildren(n)}}this.refreshMode=!1}isInsideFrag(e){}}const f=new p,y=()=>({events:{},emit(i,...e){var r;((r=this.events[i])!=null?r:[]).forEach(t=>t(...e))},on(i,e){var s,r;return(r=(s=this.events[i])==null?void 0:s.push(e))!=null||(this.events[i]=[e]),()=>{var t;this.events[i]=(t=this.events[i])==null?void 0:t.filter(n=>e!==n)}}}),h=y(),g=i=>{let e=Fr.registerState(i);return[(s="")=>Fr.getState(e.id,s),s=>{Fr.setState(e.id,s)}]},_=(i,e)=>({fn:i,data:e,_n:"useMap"}),b=[{error_code:1,message:'No URL specified ("url" parameter is empty)'},{error_code:2,message:"Invalid URL submitted"},{error_code:3,message:"Rate limit reached. Wait a second and try again"},{error_code:4,message:"IP-Address has been blocked because of violating our terms of service"},{error_code:5,message:"shrtcode code (slug) already taken/in use"},{error_code:6,message:"Unknown error"},{error_code:7,message:'No code specified ("code" parameter is empty)'},{error_code:8,message:"Invalid code submitted (code not found/there is no such short-link)"},{error_code:9,message:"Missing required parameters"},{error_code:10,message:"Trying to shorten a disallowed Link. More information on disallowed links"}],u=i=>{var e;return(e=b.find(s=>s.error_code==i))!=null?e:{error_code:-1,message:"Internal app error"}},v="https://api.shrtco.de/v2/",x=async(i,e)=>new Promise((s,r)=>{fetch(i+k(e),{method:"POST"}).then(t=>t.json()).then(t=>{var n;if(t.ok)return s(t);r(u((n=t.error_code)!=null?n:-1))}).catch(t=>r(u(t.errorCode)))}),k=i=>{let e=[];for(const s in i)if(Object.hasOwnProperty.call(i,s)){const r=i[s];e.push(s+"="+r)}return"?"+e.reduce((s,r)=>s+"&"+r)};function F(i,e,s){var r=[],t=i;function n(o){setTimeout(function(){r.length>0?n():t=t+1},e);var l=r.shift();if(!l&&o){s.apply(o[0],o[1]);return}s.apply(l[0],l[1])}return function(){var l=this,a=Array.prototype.slice.call(arguments);if(t<=0){r.push([l,a]);return}t=t-1,n([l,a])}}const w=F(1,1e3,(i,e)=>{e(i)}),I=async(i,e)=>w(await x(v+"shorten",{url:i}),e),E=i=>{const[e,s]=g(""),r=n=>{s(n.target.value)},t=async()=>{await I(e(),n=>{n!=null&&n.error_code?console.log("HAndle error here"):h.emit("link:add",n)})};return Fr.el("div",{class:"mt-1"},Fr.el("input",{placeholder:"https://votreurl.com",onChange:r,class:"px-3 py-2 w-full bg-gray-50 text-gray-700 border focus:ring ring-indigo-300 rounded outline-none transition duration-100",value:e}),Fr.el("button",{onClick:t,class:"mt-2 inline-block font-bold bg-indigo-500 hover:bg-indigo-600 active:bg-indigo-700 focus-visible:ring ring-indigo-300 text-white text-sm md:text-base font-semibold text-center rounded-lg outline-none transition duration-100 px-8 py-3"},"Cr\xE9e"))},d=()=>{let i=localStorage.getItem("links");return typeof i=="string"?JSON.parse(i):[]},L=i=>{let e=d();e.push(i),localStorage.setItem("links",JSON.stringify(e))},S=i=>{console.log(i);const e=()=>{};return Fr.el("div",{class:"p-1 w",onClick:e},"code: ",i.link.code)},C=()=>{let i=d();const[e,s]=g(i);h.on("link:add",t=>{console.log(t),t!=null&&t.result&&(L(t.result),s(d()))});const r=()=>{s([...e(),{code:"aaa"}])};return Fr.el("div",null,Fr.el("button",{onClick:r},"add"),Fr.el("div",{class:"flex flex-col flex-2"},_(t=>t.map(n=>Fr.el(S,{link:n})),e)))},P=(i,e)=>Fr.el("div",{class:"h-screen w-screen bg-gray-900 flex flex-col space-y-4 items-center justify-center"},e),N=i=>Fr.el(P,null,Fr.el("div",{class:"w-150 h-40 rounded bg-light-700 p-4 text-center flex flex-col"},Fr.el("div",{class:"font-bold font-mono text-lg"},"Cr\xE9e votre lien coup\xE9 !"),Fr.el(E,null)),Fr.el("div",{class:"w-150 rounded bg-light-700 p-4 text-center flex flex-col"},Fr.el("div",{class:"font-bold font-mono text-lg"},"Listes de vos liens"),Fr.el("div",null,Fr.el(C,null))));window.Fr=f;const A=()=>{f.render(N,document.getElementById("app"))};A();
